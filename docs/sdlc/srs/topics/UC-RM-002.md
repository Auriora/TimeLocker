# UC-RM-002: Edit / Remove Repository

| Field                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Use Case ID**              | UC‑RM‑002                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Name**                     | Edit / Remove Repository                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Primary Actors**           | Everyday User, Power User                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Stakeholders & Interests** | _User_ – wants to update repository details (endpoint, credentials, etc.) or remove obsolete repositories without affecting running processes; _System_ – must safely persist configuration changes, ensure pending backup jobs are updated or halted, and maintain a complete audit trail.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Pre‑conditions**           | 1. At least one repository has been previously registered (per UC‑RM‑001). 2. The repository to be edited or removed is currently accessible (for edits) or is no longer required. 3. The user has the necessary permissions to modify repository configurations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Post‑conditions**          | • **Successful edit:** Updated repository configuration saved; any associated scheduled backups re‑evaluated; audit log updated with an entry (`REPO_UPDATE`). • **Successful removal:** Repository is removed from the configuration; scheduled backups using that repository are cancelled or reassigned; audit log updated with an entry (`REPO_DELETE`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Main Flow**                | 1. User navigates to the **Manage Repositories** section on the dashboard. 2. System displays a list of registered repositories with options to **Edit** or **Delete**. 3. For editing:   a. User selects a repository and clicks **Edit**.   b. System loads the existing repository configuration in a pre‑populated form.   c. User modifies the repository details (e.g., endpoint, credentials, and region settings).   d. System performs validation (including region compliance and connection tests) and highlights any errors.   e. User clicks **Save**, after which the system updates the configuration and logs a `REPO_UPDATE` event. 4. For removal:   a. User selects a repository and clicks **Delete**.   b. System displays a confirmation dialog outlining potential impacts (such as cancellation of scheduled backups).   c. User confirms deletion.   d. System deletes the repository configuration, cancels or updates affected backup schedules, and logs a `REPO_DELETE` event. |
| **Alternative Flows**        | **AF‑1: Edit Validation Failure**   a. If the system detects invalid changes (e.g., an unreachable endpoint or region mismatch), it displays error messages and highlights the problematic fields, preventing saving. **AF‑2: Cancel Edit Operation**   a. If the user cancels the edit, no changes are saved and the system returns to the repository list. **AF‑3: Deletion Aborted**   a. If the user cancels the deletion confirmation, the repository remains unchanged.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Special Requirements**     | • Must validate new repository details (including region compliance) with a maximum latency of ≤ 50 ms (NFR‑SEC‑12). • Audit log must capture both the pre‑edit and post‑edit states (for traceability) ensuring compliance with FR‑MON‑001/006. • For deletion, if the repository contains active or historic backups, the system should issue an additional confirmation prompt to prevent unintended data loss (per FR‑BK‑002 and FR‑MON‑001).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Related FRs**              | FR‑RM‑001 … FR‑RM‑005, FR‑SEC‑002, FR‑MON‑001                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Related NFRs**             | NFR‑SEC‑12, NFR‑PERF‑02, plus relevant UI consistency and safety NFRs (NFR‑USE‑01)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
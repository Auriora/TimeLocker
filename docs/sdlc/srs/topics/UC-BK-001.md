# UC-BK-001: Create Backup

| Field                        | Description                                                                                                                                                                                                                                                                                                                                                                                      |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Use Case ID**              | UC-BK-001                                                                                                                                                                                                                                                                                                                                                                                        |
| **Name**                     | Create Backup                                                                                                                                                                                                                                                                                                                                                                                    |
| **Primary Actors**           | Everyday User, Power User                                                                                                                                                                                                                                                                                                                                                                        |
| **Stakeholders & Interests** | **User** – wants reliable, quick backup. <br> **System** – must ensure data integrity and compliance.                                                                                                                                                                                                                                                                                                  |
| **Pre-conditions**           | 1. At least one repository is configured and reachable. <br> 2. User has read access to selected data sources. <br> 3. Sufficient storage space is available in target repository.                                                                                                                                                                                                                       |
| **Post-conditions**          | • Successful: Snapshot stored, audit log updated, next schedule recalculated. <br> • Failure: Error logged with reason; user notified.                                                                                                                                                                                                                                                               |
| **Main Flow**                | 1. User clicks **Create Backup** (or schedule trigger fires). <br> 2. System enumerates files based on inclusion/exclusion patterns. <br> 3. System executes `restic backup` with appropriate flags. <br> 4. System streams real-time progress (files, bytes, ETA). <br> 5. Upon completion, system runs `restic check` to validate snapshot. <br> 6. System writes success entry to immutable audit log and updates dashboard. |
| **Alternative Flows**        | **AF-1 Network interruption** <br> a. Connection drops while uploading. <br> b. System retries up to *n* times with exponential back-off. <br> c. If retries exhausted, marks backup **Failed** and logs `ERROR_NETWORK` event.                                                                                                                                                                              |
| **Special Requirements**     | • Progress updates ≤ 1 s latency ([NFR-PERF-02](3-4-1-Performance.md#nfrPerf02)). <br> • Retry policy per [FR-ERR-001](3-1-7-Error-Handling-Resource-Management.md#frErr001). <br> • Audit log entry per [FR-MON-001](3-1-6-Monitoring-Reporting.md#frMon001)/[006](3-1-6-Monitoring-Reporting.md#frMon006).                                                                                                                                                                                                                                                                               |
| **Related FRs**              | [FR-BK-001](3-1-2-Backup-Operations.md#frBk001) … [005](3-1-2-Backup-Operations.md#frBk005), [FR-ERR-001](3-1-7-Error-Handling-Resource-Management.md#frErr001)/[002](3-1-7-Error-Handling-Resource-Management.md#frErr002), [FR-MON-001](3-1-6-Monitoring-Reporting.md#frMon001)/[006](3-1-6-Monitoring-Reporting.md#frMon006)/[007](3-1-6-Monitoring-Reporting.md#frMon007)                                                                                                                                                                                                                                                                                                                                              |
| **Related NFRs**             | [NFR-PERF-01](3-4-1-Performance.md#nfrPerf01)/[02](3-4-1-Performance.md#nfrPerf02), [NFR-REL-03](3-4-2-Reliability-Stability.md#nfrRel03), [NFR-AUD-01](3-4-1-Performance.md#nfrAud01)/[02](3-4-1-Performance.md#nfrAud02)                                                                                                                                                                                                                                                                                                                                                        |
